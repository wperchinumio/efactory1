---
description: Enforce Luno UI + AG Grid conventions for eFactory-style apps
globs:
  - "app/**/*"
  - "components/**/*"
  - "src/**/*"
alwaysApply: true
---

# UI & Theme
- Copy the entire **Luno Next.js Tailwind Admin** theme into the project.
- **All controls must be Luno**: inputs, selects, radios, checkboxes, buttons, dialogs, tabs, toasts, pagination, date/time pickers. No custom-styled controls or other UI kits.
- Use Luno layout, sidebar, top menu, and light/dark mode as-is.

# Tables
- **Complex tables → AG Grid**.
- **Simple tables → Luno table**.
- Complex table heuristic (legacy eFactory): the page makes **two API calls**:
  1) columns (title, type, position, etc.),
  2) data.
  Replicate this in AG Grid: fetch column defs and data separately; apply server-provided layout dynamically.

# Architecture & Tooling
- Next.js + TypeScript + TailwindCSS.
- Strict TS, ESLint + Prettier.
- Base API URL: `https://efactory.dclcorp.com`.
- Analyze legacy code to infer request/response shapes; create **TypeScript interfaces** for all models.
- Implement **real authentication** (no mock); protect routes accordingly.
- Recreate all legacy pages/workflows with live APIs; **no mock/sample data**.

# Structure
- Prefer `app/` router.
- Folders: `components/`, `features/`, `services/` (API), `hooks/`, `lib/`, `types/`.
- Keep UI consistent with Luno tokens/utilities.
- Give priority to create reusable component so when we fix/update a component the whole site will benefit.